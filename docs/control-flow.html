<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.4 Control Flow | C++ for Rustaceans</title>
  <meta name="description" content="1.4 Control Flow | C++ for Rustaceans" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="1.4 Control Flow | C++ for Rustaceans" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="1.4 Control Flow | C++ for Rustaceans" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.4 Control Flow | C++ for Rustaceans" />
  
  <meta name="twitter:description" content="1.4 Control Flow | C++ for Rustaceans" />
  

<meta name="author" content="Tianyi Shi" />


<meta name="date" content="2020-11-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pointers-and-references.html"/>

<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="https://tianyishi2001.github.io/audiotags">audiotags Manual</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="reading-this-book.html"><a href="reading-this-book.html"><i class="fa fa-check"></i>Reading This Book</a></li>
<li class="chapter" data-level="" data-path="about-this-book.html"><a href="about-this-book.html"><i class="fa fa-check"></i>About this Book</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1" data-path="hello-c.html"><a href="hello-c.html"><i class="fa fa-check"></i><b>1</b> Hello C++</a>
<ul>
<li class="chapter" data-level="1.1" data-path="hello-world.html"><a href="hello-world.html"><i class="fa fa-check"></i><b>1.1</b> Hello world</a></li>
<li class="chapter" data-level="1.2" data-path="hello-data-types-and-variables.html"><a href="hello-data-types-and-variables.html"><i class="fa fa-check"></i><b>1.2</b> Hello Data Types and Variables</a></li>
<li class="chapter" data-level="1.3" data-path="pointers-and-references.html"><a href="pointers-and-references.html"><i class="fa fa-check"></i><b>1.3</b> Pointers and References</a></li>
<li class="chapter" data-level="1.4" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>1.4</b> Control Flow</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="control-flow.html"><a href="control-flow.html#if...else"><i class="fa fa-check"></i><b>1.4.1</b> <code>if...else</code></a></li>
<li class="chapter" data-level="1.4.2" data-path="control-flow.html"><a href="control-flow.html#while-loop"><i class="fa fa-check"></i><b>1.4.2</b> <code>while</code> Loop</a></li>
<li class="chapter" data-level="1.4.3" data-path="control-flow.html"><a href="control-flow.html#for-loop"><i class="fa fa-check"></i><b>1.4.3</b> <code>for</code> Loop</a></li>
<li class="chapter" data-level="1.4.4" data-path="control-flow.html"><a href="control-flow.html#goto-statement-and-breaking-outer-loops"><i class="fa fa-check"></i><b>1.4.4</b> <code>goto</code> Statement and Breaking outer Loops</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">C++ for Rustaceans</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="control-flow" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Control Flow</h2>
<p>C++ offers 5 types of control flow statements. <code>if...else</code>, <code>for</code> loop and <code>while</code> loop are pretty much the same as in Rust, but the <code>switch</code> statement is much less powerful than Rust’s <code>match</code>. Additionally there is a <code>goto</code> statement which performs unconditional jump and is notorious for leading to “unmaintainable spaghetti code” (however, people are still using them, and you’ll see why in a minute).</p>
<p>If you have experience in Javascript or Java, most of C++’s control flow syntax will be familiar to you. The conditional test associated with <code>if</code>, <code>for</code>, <code>while</code> and <code>switch</code> must be surrounded by parentheses.</p>
<div id="if...else" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> <code>if...else</code></h3>
<p>Like Rust, C++ offers <code>if</code> and <code>else</code> keywords to work with conditionals. Unlike Rust, C++ is not expression-oriented, so you <em>cannot</em> write:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="control-flow.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a = <span class="cf">if</span> (<span class="kw">true</span>) { <span class="dv">5</span> } <span class="cf">else</span> { <span class="dv">10</span> };</span></code></pre></div>
<p>But this kind of conditional assignment is a very common pattern, so C++ invented yet another syntax specifically designed for this single task: the ternary operator. So, instead of writing:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb16-1"><a href="control-flow.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a;</span>
<span id="cb16-2"><a href="control-flow.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="kw">true</span>) { a = <span class="dv">5</span>; } <span class="cf">else</span> { a = <span class="dv">10</span>; };</span></code></pre></div>
<p>you could write:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="control-flow.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a = <span class="kw">true</span> ? <span class="dv">5</span> : <span class="dv">10</span>;</span></code></pre></div>
</div>
<div id="while-loop" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> <code>while</code> Loop</h3>
<p>The <code>while</code> loop in C++ has nothing different from Rust, just remember to wrap the test expression with parentheses.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb18-1"><a href="control-flow.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i = <span class="dv">10</span>;</span>
<span id="cb18-2"><a href="control-flow.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i &gt; <span class="dv">0</span>)</span>
<span id="cb18-3"><a href="control-flow.html#cb18-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb18-4"><a href="control-flow.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i == <span class="dv">8</span>)</span>
<span id="cb18-5"><a href="control-flow.html#cb18-5" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-6"><a href="control-flow.html#cb18-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span>;</span>
<span id="cb18-7"><a href="control-flow.html#cb18-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-8"><a href="control-flow.html#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i == <span class="dv">5</span>)</span>
<span id="cb18-9"><a href="control-flow.html#cb18-9" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-10"><a href="control-flow.html#cb18-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span>;</span>
<span id="cb18-11"><a href="control-flow.html#cb18-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-12"><a href="control-flow.html#cb18-12" aria-hidden="true" tabindex="-1"></a>    i--;</span>
<span id="cb18-13"><a href="control-flow.html#cb18-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="for-loop" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> <code>for</code> Loop</h3>
<p>A traditional C-style <code>for</code> loop looks like this (you’ll be familiar with this if you code Javascript or Java):</p>
<pre><code>for (&lt;initializationStatement&gt;; &lt;testExpression&gt;; &lt;updateStatement&gt;)
{
    // do something
}</code></pre>
<p>For example:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb20-1"><a href="control-flow.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb20-2"><a href="control-flow.html#cb20-2" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;|i|j|</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb20-3"><a href="control-flow.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">2</span>; i++)</span>
<span id="cb20-4"><a href="control-flow.html#cb20-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb20-5"><a href="control-flow.html#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; j++)</span>
<span id="cb20-6"><a href="control-flow.html#cb20-6" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb20-7"><a href="control-flow.html#cb20-7" aria-hidden="true" tabindex="-1"></a>        printf(<span class="st">&quot;|</span><span class="sc">%d</span><span class="st">|</span><span class="sc">%d</span><span class="st">|&quot;</span>, i, j);</span>
<span id="cb20-8"><a href="control-flow.html#cb20-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb20-9"><a href="control-flow.html#cb20-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>C++11 introduced the range-based <code>for</code> statement, which is also known as a <code>for...in</code> loop in most other languages (Rust, Swift, Python, Ruby, …). The syntax itself is easy but knowing the relationship between the element and the iterable can be tricky. Fortuantely, we are Rustaceans, so an easy way for me to illustrate and for you to understand is to write a few equivalent examples in Rust and C++.</p>
<div id="scenario-1-copying-cloning" class="section level4" number="1.4.3.1">
<h4><span class="header-section-number">1.4.3.1</span> Scenario 1: Copying (Cloning)</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb21-1"><a href="control-flow.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Rust</span></span>
<span id="cb21-2"><a href="control-flow.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="st">&quot;a&quot;</span><span class="op">.</span>to_string()<span class="op">,</span> <span class="st">&quot;b&quot;</span><span class="op">.</span>to_string()<span class="op">,</span> <span class="st">&quot;c&quot;</span><span class="op">.</span>to_string()]<span class="op">;</span></span>
<span id="cb21-3"><a href="control-flow.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> e<span class="op">.</span>clone() <span class="kw">in</span> <span class="op">&amp;</span>v <span class="op">{</span></span>
<span id="cb21-4"><a href="control-flow.html#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> e)<span class="op">;</span></span>
<span id="cb21-5"><a href="control-flow.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb22-1"><a href="control-flow.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">// C++</span></span>
<span id="cb22-2"><a href="control-flow.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb22-3"><a href="control-flow.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb22-4"><a href="control-flow.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="bu">std::</span>string&gt; a{<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>};</span>
<span id="cb22-5"><a href="control-flow.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">auto</span> s : a) <span class="co">// s has type `std::string`</span></span>
<span id="cb22-6"><a href="control-flow.html#cb22-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb22-7"><a href="control-flow.html#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout &lt;&lt; s &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb22-8"><a href="control-flow.html#cb22-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Note how Rust makes it crystal clear that copying during iteration and using <code>String</code> for instead of <code>&amp;str</code> for static strings are anti-patterns and how C++ makes it easy to write such inefficient code.</p>
</div>
<div id="scenario-2-as-reference-borrowing" class="section level4" number="1.4.3.2">
<h4><span class="header-section-number">1.4.3.2</span> Scenario 2: As Reference (Borrowing)</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb23-1"><a href="control-flow.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Rust</span></span>
<span id="cb23-2"><a href="control-flow.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb23-3"><a href="control-flow.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> e <span class="kw">in</span> <span class="op">&amp;</span>v <span class="op">{</span></span>
<span id="cb23-4"><a href="control-flow.html#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> <span class="op">*</span>e)<span class="op">;</span></span>
<span id="cb23-5"><a href="control-flow.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb24-1"><a href="control-flow.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">// C++</span></span>
<span id="cb24-2"><a href="control-flow.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb24-3"><a href="control-flow.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb24-4"><a href="control-flow.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt; a{<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>};</span>
<span id="cb24-5"><a href="control-flow.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">auto</span>&amp; num : a)</span>
<span id="cb24-6"><a href="control-flow.html#cb24-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb24-7"><a href="control-flow.html#cb24-7" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span>, num); <span class="co">// no asterisk!</span></span>
<span id="cb24-8"><a href="control-flow.html#cb24-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="scenario-3-mutation" class="section level4" number="1.4.3.3">
<h4><span class="header-section-number">1.4.3.3</span> Scenario 3: Mutation</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb25-1"><a href="control-flow.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Rust</span></span>
<span id="cb25-2"><a href="control-flow.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb25-3"><a href="control-flow.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> e <span class="kw">in</span> <span class="op">&amp;</span><span class="kw">mut</span> v <span class="op">{</span></span>
<span id="cb25-4"><a href="control-flow.html#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>e <span class="op">=</span> e <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb25-5"><a href="control-flow.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-6"><a href="control-flow.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="pp">assert_eq!</span>(v<span class="op">,</span> <span class="pp">vec!</span>[<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>])<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb26-1"><a href="control-flow.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">// C++</span></span>
<span id="cb26-2"><a href="control-flow.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb26-3"><a href="control-flow.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cassert&gt;</span></span>
<span id="cb26-4"><a href="control-flow.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt; a{<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>};</span>
<span id="cb26-5"><a href="control-flow.html#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">auto</span> &amp;num : a)</span>
<span id="cb26-6"><a href="control-flow.html#cb26-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb26-7"><a href="control-flow.html#cb26-7" aria-hidden="true" tabindex="-1"></a>    num++;</span>
<span id="cb26-8"><a href="control-flow.html#cb26-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-9"><a href="control-flow.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="ot">assert</span>(a == (<span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt;{<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>}));</span></code></pre></div>
<p>Note the parentheses surrounding the second argument of <code>assert</code>, without which we would get an error. This is because <code>assert</code> is a so called <code>#define</code> macro, which simply parses its arguments as comma-separated identifiers and does text replacement. Since <code>std::vector&lt;int&gt;{2, 3, 4, 5, 6}</code> contains commas, it has to be escaped with parentheses.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> This macro is actually defined in <code>assert.h</code> which is part of C’s std, and its more or less copied verbatim into C++’s <code>cassert</code>. Theoretically I think it is possible to implement C++’s own <code>assert</code> or <code>#define</code> that removes the need for adding parentheses here and there. However, the C++ committee never cares about ergonomics.</p>
<!-- ####

```rust
let v = vec![1, 2, 3, 4, 5];
for e in v {
    println!("{}", e);
}
``` -->
</div>
</div>
<div id="goto-statement-and-breaking-outer-loops" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> <code>goto</code> Statement and Breaking outer Loops</h3>
<p>Rust, like Java and Python, allows you to break an outer loop from an inner loop:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb27-1"><a href="control-flow.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">3</span> <span class="op">{</span></span>
<span id="cb27-2"><a href="control-flow.html#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="ot">&#39;for_j</span><span class="op">:</span> <span class="kw">for</span> j <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">3</span> <span class="op">{</span></span>
<span id="cb27-3"><a href="control-flow.html#cb27-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> k <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">3</span> <span class="op">{</span></span>
<span id="cb27-4"><a href="control-flow.html#cb27-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> i <span class="op">==</span> <span class="dv">1</span> <span class="op">{</span></span>
<span id="cb27-5"><a href="control-flow.html#cb27-5" aria-hidden="true" tabindex="-1"></a>                <span class="kw">break</span> <span class="ot">&#39;for_j</span><span class="op">;</span></span>
<span id="cb27-6"><a href="control-flow.html#cb27-6" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb27-7"><a href="control-flow.html#cb27-7" aria-hidden="true" tabindex="-1"></a>            <span class="pp">println!</span>(<span class="st">&quot;{} {} {}&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">,</span> k)<span class="op">;</span></span>
<span id="cb27-8"><a href="control-flow.html#cb27-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb27-9"><a href="control-flow.html#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb27-10"><a href="control-flow.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>C++ doesn’t support this natively, so people are using <code>goto</code> to achieve this:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb28-1"><a href="control-flow.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb28-2"><a href="control-flow.html#cb28-2" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;Break outer loop using goto:</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb28-3"><a href="control-flow.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">3</span>; ++i)</span>
<span id="cb28-4"><a href="control-flow.html#cb28-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb28-5"><a href="control-flow.html#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="control-flow.html#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; ++j)</span>
<span id="cb28-7"><a href="control-flow.html#cb28-7" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb28-8"><a href="control-flow.html#cb28-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="dt">int</span> k = <span class="dv">0</span>; k &lt; <span class="dv">3</span>; ++k)</span>
<span id="cb28-9"><a href="control-flow.html#cb28-9" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb28-10"><a href="control-flow.html#cb28-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (i == <span class="dv">1</span>)</span>
<span id="cb28-11"><a href="control-flow.html#cb28-11" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb28-12"><a href="control-flow.html#cb28-12" aria-hidden="true" tabindex="-1"></a>                <span class="cf">goto</span> the_end;</span>
<span id="cb28-13"><a href="control-flow.html#cb28-13" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb28-14"><a href="control-flow.html#cb28-14" aria-hidden="true" tabindex="-1"></a>            <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;i: &quot;</span> &lt;&lt; i &lt;&lt; <span class="st">&quot; j: &quot;</span> &lt;&lt; j &lt;&lt; <span class="st">&quot; k &quot;</span> &lt;&lt; k &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb28-15"><a href="control-flow.html#cb28-15" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb28-16"><a href="control-flow.html#cb28-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb28-17"><a href="control-flow.html#cb28-17" aria-hidden="true" tabindex="-1"></a>the_end:</span>
<span id="cb28-18"><a href="control-flow.html#cb28-18" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb28-19"><a href="control-flow.html#cb28-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-20"><a href="control-flow.html#cb28-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Using <code>goto</code> sounds like I am joking. I’m not. People really suggest doing this<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. It’s a consensus that <code>goto</code> statements are error-prone, but there really aren’t better ways to do this when you absolutely need to break an outer loop. The C++ committee never solves really problems.</p>
<p>Alternatively you can use a flag, which is more verbose, and I think this is even less readable:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb29-1"><a href="control-flow.html#cb29-1" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;Break outer loop using flag:</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb29-2"><a href="control-flow.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> i_is_1{<span class="kw">false</span>};</span>
<span id="cb29-3"><a href="control-flow.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">3</span>; ++i)</span>
<span id="cb29-4"><a href="control-flow.html#cb29-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb29-5"><a href="control-flow.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="control-flow.html#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; ++j)</span>
<span id="cb29-7"><a href="control-flow.html#cb29-7" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb29-8"><a href="control-flow.html#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="dt">int</span> k = <span class="dv">0</span>; k &lt; <span class="dv">3</span>; ++k)</span>
<span id="cb29-9"><a href="control-flow.html#cb29-9" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb29-10"><a href="control-flow.html#cb29-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (i == <span class="dv">1</span>)</span>
<span id="cb29-11"><a href="control-flow.html#cb29-11" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb29-12"><a href="control-flow.html#cb29-12" aria-hidden="true" tabindex="-1"></a>                i_is_1 = <span class="kw">true</span>;</span>
<span id="cb29-13"><a href="control-flow.html#cb29-13" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span>;</span>
<span id="cb29-14"><a href="control-flow.html#cb29-14" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb29-15"><a href="control-flow.html#cb29-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb29-16"><a href="control-flow.html#cb29-16" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb29-17"><a href="control-flow.html#cb29-17" aria-hidden="true" tabindex="-1"></a>                i_is_1 = <span class="kw">false</span>;</span>
<span id="cb29-18"><a href="control-flow.html#cb29-18" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb29-19"><a href="control-flow.html#cb29-19" aria-hidden="true" tabindex="-1"></a>            <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;i: &quot;</span> &lt;&lt; i &lt;&lt; <span class="st">&quot; j: &quot;</span> &lt;&lt; j &lt;&lt; <span class="st">&quot; k &quot;</span> &lt;&lt; k &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb29-20"><a href="control-flow.html#cb29-20" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb29-21"><a href="control-flow.html#cb29-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (i_is_1)</span>
<span id="cb29-22"><a href="control-flow.html#cb29-22" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb29-23"><a href="control-flow.html#cb29-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span>;</span>
<span id="cb29-24"><a href="control-flow.html#cb29-24" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb29-25"><a href="control-flow.html#cb29-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-26"><a href="control-flow.html#cb29-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>There is another cleaner way, using the lambda trick (but why the hell must I use a lamba for such a basic task???):</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb30-1"><a href="control-flow.html#cb30-1" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;Break outer loop using lambda:</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb30-2"><a href="control-flow.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">3</span>; ++i)</span>
<span id="cb30-3"><a href="control-flow.html#cb30-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb30-4"><a href="control-flow.html#cb30-4" aria-hidden="true" tabindex="-1"></a>    [&amp;] {</span>
<span id="cb30-5"><a href="control-flow.html#cb30-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; ++j)</span>
<span id="cb30-6"><a href="control-flow.html#cb30-6" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb30-7"><a href="control-flow.html#cb30-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> (<span class="dt">int</span> k = <span class="dv">0</span>; k &lt; <span class="dv">3</span>; ++k)</span>
<span id="cb30-8"><a href="control-flow.html#cb30-8" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb30-9"><a href="control-flow.html#cb30-9" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (i == <span class="dv">1</span>)</span>
<span id="cb30-10"><a href="control-flow.html#cb30-10" aria-hidden="true" tabindex="-1"></a>                {</span>
<span id="cb30-11"><a href="control-flow.html#cb30-11" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">return</span>;</span>
<span id="cb30-12"><a href="control-flow.html#cb30-12" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb30-13"><a href="control-flow.html#cb30-13" aria-hidden="true" tabindex="-1"></a>                <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;i: &quot;</span> &lt;&lt; i &lt;&lt; <span class="st">&quot; j: &quot;</span> &lt;&lt; j &lt;&lt; <span class="st">&quot; k &quot;</span> &lt;&lt; k &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb30-14"><a href="control-flow.html#cb30-14" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb30-15"><a href="control-flow.html#cb30-15" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb30-16"><a href="control-flow.html#cb30-16" aria-hidden="true" tabindex="-1"></a>    }();</span>
<span id="cb30-17"><a href="control-flow.html#cb30-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>I’ll get back to lamdas later. For now just accept that they are roughly equivalent to Rust’s closures.</p>

</div>
</div>
<!-- </div> -->







<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Related to this stackoverflow question: <a href="https://stackoverflow.com/questions/38030048" class="uri">https://stackoverflow.com/questions/38030048</a><a href="control-flow.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="https://stackoverflow.com/questions/1257744/can-i-use-break-to-exit-multiple-nested-for-loops" class="uri">https://stackoverflow.com/questions/1257744/can-i-use-break-to-exit-multiple-nested-for-loops</a><a href="control-flow.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pointers-and-references.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["cpp4r.pdf", "cpp4r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

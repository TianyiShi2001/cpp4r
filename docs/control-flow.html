<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.6 Control Flow | C++ for Rustaceans</title>
  <meta name="description" content="1.6 Control Flow | C++ for Rustaceans" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="1.6 Control Flow | C++ for Rustaceans" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="1.6 Control Flow | C++ for Rustaceans" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.6 Control Flow | C++ for Rustaceans" />
  
  <meta name="twitter:description" content="1.6 Control Flow | C++ for Rustaceans" />
  

<meta name="author" content="Tianyi Shi" />


<meta name="date" content="2020-11-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pointers-and-references.html"/>
<link rel="next" href="exercise.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="https://tianyishi2001.github.io/cpp4r">C++ for Rustaceans</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="reading-this-book.html"><a href="reading-this-book.html"><i class="fa fa-check"></i>Reading This Book</a></li>
<li class="chapter" data-level="" data-path="about-this-book.html"><a href="about-this-book.html"><i class="fa fa-check"></i>About this Book</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1" data-path="hello-c.html"><a href="hello-c.html"><i class="fa fa-check"></i><b>1</b> Hello C++</a>
<ul>
<li class="chapter" data-level="1.1" data-path="hello-world.html"><a href="hello-world.html"><i class="fa fa-check"></i><b>1.1</b> Hello world</a></li>
<li class="chapter" data-level="1.2" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>1.2</b> Data Types</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="data-types.html"><a href="data-types.html#integer-types"><i class="fa fa-check"></i><b>1.2.1</b> Integer Types</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-types.html"><a href="data-types.html#floating-point-numbers"><i class="fa fa-check"></i><b>1.2.2</b> Floating Point Numbers</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="variables.html"><a href="variables.html"><i class="fa fa-check"></i><b>1.3</b> Variables</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="variables.html"><a href="variables.html#mutability"><i class="fa fa-check"></i><b>1.3.1</b> Mutability</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>1.4</b> Functions</a></li>
<li class="chapter" data-level="1.5" data-path="pointers-and-references.html"><a href="pointers-and-references.html"><i class="fa fa-check"></i><b>1.5</b> Pointers and References</a></li>
<li class="chapter" data-level="1.6" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>1.6</b> Control Flow</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="control-flow.html"><a href="control-flow.html#if...else"><i class="fa fa-check"></i><b>1.6.1</b> <code>if...else</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="control-flow.html"><a href="control-flow.html#while-loop"><i class="fa fa-check"></i><b>1.6.2</b> <code>while</code> Loop</a></li>
<li class="chapter" data-level="1.6.3" data-path="control-flow.html"><a href="control-flow.html#for-loop"><i class="fa fa-check"></i><b>1.6.3</b> <code>for</code> Loop</a></li>
<li class="chapter" data-level="1.6.4" data-path="control-flow.html"><a href="control-flow.html#goto-statement-and-breaking-outer-loops"><i class="fa fa-check"></i><b>1.6.4</b> <code>goto</code> Statement and Breaking outer Loops</a></li>
<li class="chapter" data-level="1.6.5" data-path="control-flow.html"><a href="control-flow.html#switch"><i class="fa fa-check"></i><b>1.6.5</b> <code>switch</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise.html"><a href="exercise.html"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="enumerations.html"><a href="enumerations.html"><i class="fa fa-check"></i><b>2</b> Enumerations</a>
<ul>
<li class="chapter" data-level="2.1" data-path="the-plain-enum.html"><a href="the-plain-enum.html"><i class="fa fa-check"></i><b>2.1</b> The Plain <code>enum</code></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="the-plain-enum.html"><a href="the-plain-enum.html#defining-an-enum"><i class="fa fa-check"></i><b>2.1.1</b> Defining an Enum</a></li>
<li class="chapter" data-level="2.1.2" data-path="the-plain-enum.html"><a href="the-plain-enum.html#using-an-enum"><i class="fa fa-check"></i><b>2.1.2</b> Using an Enum</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">C++ for Rustaceans</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="control-flow" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> Control Flow</h2>
<p>C++ offers 5 types of control flow statements. <code>if...else</code>, <code>for</code> loop and <code>while</code> loop are pretty much the same as in Rust, but the <code>switch</code> statement is much less powerful than Rust’s <code>match</code>. Additionally there is a <code>goto</code> statement which performs unconditional jump.</p>
<p>If you have experience in Javascript or Java, most of C++’s control flow syntax will be familiar to you. The conditional test associated with <code>if</code>, <code>for</code>, <code>while</code> and <code>switch</code> must be surrounded by parentheses.</p>
<div id="if...else" class="section level3" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> <code>if...else</code></h3>
<p>Like Rust, C++ offers <code>if</code> and <code>else</code> keywords to work with conditionals. Unlike Rust, C++ is not expression-oriented, so you <em>cannot</em> write:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb28-1"><a href="control-flow.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a = <span class="cf">if</span> (<span class="kw">true</span>) { <span class="dv">5</span> } <span class="cf">else</span> { <span class="dv">10</span> };</span></code></pre></div>
<p>But this kind of conditional assignment is a very common pattern, so C++ invented yet another syntax specifically designed for this single task: the ternary operator. So, instead of writing:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb29-1"><a href="control-flow.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a;</span>
<span id="cb29-2"><a href="control-flow.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="kw">true</span>) { a = <span class="dv">5</span>; } <span class="cf">else</span> { a = <span class="dv">10</span>; };</span></code></pre></div>
<p>you could write:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb30-1"><a href="control-flow.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a = <span class="kw">true</span> ? <span class="dv">5</span> : <span class="dv">10</span>;</span></code></pre></div>
<p>The braces around the statement after the condition of <code>if</code> can be omitted if the statement can be written in a single line.
For example:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb31-1"><a href="control-flow.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (i &gt; <span class="dv">5</span>) {</span>
<span id="cb31-2"><a href="control-flow.html#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;i is greater than 5&quot;</span> &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb31-3"><a href="control-flow.html#cb31-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>can be reduced to:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb32-1"><a href="control-flow.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (i &gt; <span class="dv">5</span>)</span>
<span id="cb32-2"><a href="control-flow.html#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;i is greater than 5&quot;</span> &lt;&lt; <span class="bu">std::</span>endl;</span></code></pre></div>
</div>
<div id="while-loop" class="section level3" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> <code>while</code> Loop</h3>
<p>The <code>while</code> loop in C++ has nothing different from Rust, just remember to wrap the test expression with parentheses.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb33-1"><a href="control-flow.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb33-2"><a href="control-flow.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i = <span class="dv">10</span>;</span>
<span id="cb33-3"><a href="control-flow.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i &gt; <span class="dv">0</span>)</span>
<span id="cb33-4"><a href="control-flow.html#cb33-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb33-5"><a href="control-flow.html#cb33-5" aria-hidden="true" tabindex="-1"></a>    i--;</span>
<span id="cb33-6"><a href="control-flow.html#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i == <span class="dv">8</span>)</span>
<span id="cb33-7"><a href="control-flow.html#cb33-7" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb33-8"><a href="control-flow.html#cb33-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span>;</span>
<span id="cb33-9"><a href="control-flow.html#cb33-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-10"><a href="control-flow.html#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i == <span class="dv">5</span>)</span>
<span id="cb33-11"><a href="control-flow.html#cb33-11" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb33-12"><a href="control-flow.html#cb33-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span>;</span>
<span id="cb33-13"><a href="control-flow.html#cb33-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-14"><a href="control-flow.html#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout &lt;&lt; i &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb33-15"><a href="control-flow.html#cb33-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="for-loop" class="section level3" number="1.6.3">
<h3><span class="header-section-number">1.6.3</span> <code>for</code> Loop</h3>
<p>A traditional C-style <code>for</code> loop looks like this:</p>
<pre><code>for (&lt;initializationStatement&gt;; &lt;testExpression&gt;; &lt;updateStatement&gt;)
{
    // do something
}</code></pre>
<p>For example:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb35-1"><a href="control-flow.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb35-2"><a href="control-flow.html#cb35-2" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;|i|j|</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb35-3"><a href="control-flow.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">2</span>; i++)</span>
<span id="cb35-4"><a href="control-flow.html#cb35-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb35-5"><a href="control-flow.html#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; j++)</span>
<span id="cb35-6"><a href="control-flow.html#cb35-6" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb35-7"><a href="control-flow.html#cb35-7" aria-hidden="true" tabindex="-1"></a>        printf(<span class="st">&quot;|</span><span class="sc">%d</span><span class="st">|</span><span class="sc">%d</span><span class="st">|</span><span class="sc">\n</span><span class="st">&quot;</span>, i, j);</span>
<span id="cb35-8"><a href="control-flow.html#cb35-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb35-9"><a href="control-flow.html#cb35-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>C++11 introduced the range-based <code>for</code> statement, which is also known as a <code>for...in</code> loop in most other languages (Rust, Swift, Python, Ruby, …). The syntax itself is easy but knowing the relationship between the element and the iterable can be tricky. Fortuantely, we are Rustaceans, so an easy way for me to illustrate and for you to understand is to write a few equivalent examples in Rust and C++.</p>
<div id="scenario-1-copying-cloning" class="section level4" number="1.6.3.1">
<h4><span class="header-section-number">1.6.3.1</span> Scenario 1: Copying (Cloning)</h4>
<div class="sourceCode" id="cb36"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb36-1"><a href="control-flow.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Rust</span></span>
<span id="cb36-2"><a href="control-flow.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="st">&quot;a&quot;</span><span class="op">.</span>to_string()<span class="op">,</span> <span class="st">&quot;b&quot;</span><span class="op">.</span>to_string()<span class="op">,</span> <span class="st">&quot;c&quot;</span><span class="op">.</span>to_string()]<span class="op">;</span></span>
<span id="cb36-3"><a href="control-flow.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> e<span class="op">.</span>clone() <span class="kw">in</span> <span class="op">&amp;</span>v <span class="op">{</span></span>
<span id="cb36-4"><a href="control-flow.html#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> e)<span class="op">;</span></span>
<span id="cb36-5"><a href="control-flow.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb37-1"><a href="control-flow.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">// C++</span></span>
<span id="cb37-2"><a href="control-flow.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb37-3"><a href="control-flow.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb37-4"><a href="control-flow.html#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="bu">std::</span>string&gt; a{<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>};</span>
<span id="cb37-5"><a href="control-flow.html#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">auto</span> s : a) <span class="co">// s has type `std::string`</span></span>
<span id="cb37-6"><a href="control-flow.html#cb37-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb37-7"><a href="control-flow.html#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout &lt;&lt; s &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb37-8"><a href="control-flow.html#cb37-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Note how Rust makes it crystal clear that copying during iteration and using <code>String</code> for instead of <code>&amp;str</code> for static strings are anti-patterns and how C++ makes it easy to write such inefficient code.</p>
</div>
<div id="scenario-2-as-reference-borrowing" class="section level4" number="1.6.3.2">
<h4><span class="header-section-number">1.6.3.2</span> Scenario 2: As Reference (Borrowing)</h4>
<div class="sourceCode" id="cb38"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb38-1"><a href="control-flow.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Rust</span></span>
<span id="cb38-2"><a href="control-flow.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb38-3"><a href="control-flow.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> e <span class="kw">in</span> <span class="op">&amp;</span>v <span class="op">{</span></span>
<span id="cb38-4"><a href="control-flow.html#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> <span class="op">*</span>e)<span class="op">;</span></span>
<span id="cb38-5"><a href="control-flow.html#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb39-1"><a href="control-flow.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">// C++</span></span>
<span id="cb39-2"><a href="control-flow.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb39-3"><a href="control-flow.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb39-4"><a href="control-flow.html#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt; a{<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>};</span>
<span id="cb39-5"><a href="control-flow.html#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">auto</span>&amp; num : a)</span>
<span id="cb39-6"><a href="control-flow.html#cb39-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb39-7"><a href="control-flow.html#cb39-7" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span>, num); <span class="co">// no asterisk!</span></span>
<span id="cb39-8"><a href="control-flow.html#cb39-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="scenario-3-mutation" class="section level4" number="1.6.3.3">
<h4><span class="header-section-number">1.6.3.3</span> Scenario 3: Mutation</h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb40-1"><a href="control-flow.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Rust</span></span>
<span id="cb40-2"><a href="control-flow.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb40-3"><a href="control-flow.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> e <span class="kw">in</span> <span class="op">&amp;</span><span class="kw">mut</span> v <span class="op">{</span></span>
<span id="cb40-4"><a href="control-flow.html#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>e <span class="op">=</span> <span class="op">*</span>e <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb40-5"><a href="control-flow.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb40-6"><a href="control-flow.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="pp">assert_eq!</span>(v<span class="op">,</span> <span class="pp">vec!</span>[<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>])<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb41-1"><a href="control-flow.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">// C++</span></span>
<span id="cb41-2"><a href="control-flow.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb41-3"><a href="control-flow.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cassert&gt;</span></span>
<span id="cb41-4"><a href="control-flow.html#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt; a{<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>};</span>
<span id="cb41-5"><a href="control-flow.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">auto</span> &amp;num : a)</span>
<span id="cb41-6"><a href="control-flow.html#cb41-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb41-7"><a href="control-flow.html#cb41-7" aria-hidden="true" tabindex="-1"></a>    num++;</span>
<span id="cb41-8"><a href="control-flow.html#cb41-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-9"><a href="control-flow.html#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="ot">assert</span>(a == (<span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt;{<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>}));</span></code></pre></div>
<p>Note the parentheses surrounding the second argument of <code>assert</code>, without which we would get an error. This is because <code>assert</code> is a so called <code>#define</code> macro, which simply parses its arguments as comma-separated identifiers and does text replacement. Since <code>std::vector&lt;int&gt;{2, 3, 4, 5, 6}</code> contains commas, it has to be escaped with parentheses.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> This macro is actually defined in <code>assert.h</code> which is part of C’s std, and its more or less copied verbatim into C++’s <code>cassert</code>.</p>
<!-- ####

```rust
let v = vec![1, 2, 3, 4, 5];
for e in v {
    println!("{}", e);
}
``` -->
</div>
</div>
<div id="goto-statement-and-breaking-outer-loops" class="section level3" number="1.6.4">
<h3><span class="header-section-number">1.6.4</span> <code>goto</code> Statement and Breaking outer Loops</h3>
<p>Rust, like Java and Python, allows you to break an outer loop from an inner loop:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb42-1"><a href="control-flow.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">3</span> <span class="op">{</span></span>
<span id="cb42-2"><a href="control-flow.html#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="ot">&#39;for_j</span><span class="op">:</span> <span class="kw">for</span> j <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">3</span> <span class="op">{</span></span>
<span id="cb42-3"><a href="control-flow.html#cb42-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> k <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">3</span> <span class="op">{</span></span>
<span id="cb42-4"><a href="control-flow.html#cb42-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> i <span class="op">==</span> <span class="dv">1</span> <span class="op">{</span></span>
<span id="cb42-5"><a href="control-flow.html#cb42-5" aria-hidden="true" tabindex="-1"></a>                <span class="kw">break</span> <span class="ot">&#39;for_j</span><span class="op">;</span></span>
<span id="cb42-6"><a href="control-flow.html#cb42-6" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb42-7"><a href="control-flow.html#cb42-7" aria-hidden="true" tabindex="-1"></a>            <span class="pp">println!</span>(<span class="st">&quot;{} {} {}&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">,</span> k)<span class="op">;</span></span>
<span id="cb42-8"><a href="control-flow.html#cb42-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb42-9"><a href="control-flow.html#cb42-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb42-10"><a href="control-flow.html#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>C++ doesn’t support this natively, so it’s common to use the <code>goto</code> trick to achive this<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb43-1"><a href="control-flow.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb43-2"><a href="control-flow.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> break_outer()</span>
<span id="cb43-3"><a href="control-flow.html#cb43-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb43-4"><a href="control-flow.html#cb43-4" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;Break outer loop using goto:</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb43-5"><a href="control-flow.html#cb43-5" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;i j k</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb43-6"><a href="control-flow.html#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">3</span>; ++i)</span>
<span id="cb43-7"><a href="control-flow.html#cb43-7" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb43-8"><a href="control-flow.html#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="control-flow.html#cb43-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; ++j)</span>
<span id="cb43-10"><a href="control-flow.html#cb43-10" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb43-11"><a href="control-flow.html#cb43-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> (<span class="dt">int</span> k = <span class="dv">0</span>; k &lt; <span class="dv">3</span>; ++k)</span>
<span id="cb43-12"><a href="control-flow.html#cb43-12" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb43-13"><a href="control-flow.html#cb43-13" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (i == <span class="dv">1</span>)</span>
<span id="cb43-14"><a href="control-flow.html#cb43-14" aria-hidden="true" tabindex="-1"></a>                {</span>
<span id="cb43-15"><a href="control-flow.html#cb43-15" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">goto</span> for_j_end;</span>
<span id="cb43-16"><a href="control-flow.html#cb43-16" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb43-17"><a href="control-flow.html#cb43-17" aria-hidden="true" tabindex="-1"></a>                printf(<span class="st">&quot;</span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d\n</span><span class="st">&quot;</span>, i, j, k);</span>
<span id="cb43-18"><a href="control-flow.html#cb43-18" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb43-19"><a href="control-flow.html#cb43-19" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb43-20"><a href="control-flow.html#cb43-20" aria-hidden="true" tabindex="-1"></a>    for_j_end:</span>
<span id="cb43-21"><a href="control-flow.html#cb43-21" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb43-22"><a href="control-flow.html#cb43-22" aria-hidden="true" tabindex="-1"></a>        <span class="co">// cannot be left blank. Needs a placeholder</span></span>
<span id="cb43-23"><a href="control-flow.html#cb43-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb43-24"><a href="control-flow.html#cb43-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb43-25"><a href="control-flow.html#cb43-25" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The <code>goto</code> statement must be in the same function as the label it is referring,
so duplicated labels across different functions won’t cause conflicts.</p>
<p>Alternatively you can use a flag, which is more verbose, and I think this is even less readable:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb44-1"><a href="control-flow.html#cb44-1" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;Break outer loop using flag:</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb44-2"><a href="control-flow.html#cb44-2" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;i j k</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb44-3"><a href="control-flow.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> i_is_1{<span class="kw">false</span>};</span>
<span id="cb44-4"><a href="control-flow.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">3</span>; ++i)</span>
<span id="cb44-5"><a href="control-flow.html#cb44-5" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb44-6"><a href="control-flow.html#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="control-flow.html#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; ++j)</span>
<span id="cb44-8"><a href="control-flow.html#cb44-8" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb44-9"><a href="control-flow.html#cb44-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="dt">int</span> k = <span class="dv">0</span>; k &lt; <span class="dv">3</span>; ++k)</span>
<span id="cb44-10"><a href="control-flow.html#cb44-10" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb44-11"><a href="control-flow.html#cb44-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (i == <span class="dv">1</span>)</span>
<span id="cb44-12"><a href="control-flow.html#cb44-12" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb44-13"><a href="control-flow.html#cb44-13" aria-hidden="true" tabindex="-1"></a>                i_is_1 = <span class="kw">true</span>;</span>
<span id="cb44-14"><a href="control-flow.html#cb44-14" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span>;</span>
<span id="cb44-15"><a href="control-flow.html#cb44-15" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb44-16"><a href="control-flow.html#cb44-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb44-17"><a href="control-flow.html#cb44-17" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb44-18"><a href="control-flow.html#cb44-18" aria-hidden="true" tabindex="-1"></a>                i_is_1 = <span class="kw">false</span>;</span>
<span id="cb44-19"><a href="control-flow.html#cb44-19" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb44-20"><a href="control-flow.html#cb44-20" aria-hidden="true" tabindex="-1"></a>            printf(<span class="st">&quot;</span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d\n</span><span class="st">&quot;</span>, i, j, k);</span>
<span id="cb44-21"><a href="control-flow.html#cb44-21" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb44-22"><a href="control-flow.html#cb44-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (i_is_1)</span>
<span id="cb44-23"><a href="control-flow.html#cb44-23" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb44-24"><a href="control-flow.html#cb44-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span>;</span>
<span id="cb44-25"><a href="control-flow.html#cb44-25" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb44-26"><a href="control-flow.html#cb44-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb44-27"><a href="control-flow.html#cb44-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>There is another cleaner way, using the lambda trick (less common than the <code>goto</code> approach):</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb45-1"><a href="control-flow.html#cb45-1" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;Break outer loop using lambda:</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb45-2"><a href="control-flow.html#cb45-2" aria-hidden="true" tabindex="-1"></a>printf(<span class="st">&quot;i j k</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb45-3"><a href="control-flow.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">3</span>; ++i)</span>
<span id="cb45-4"><a href="control-flow.html#cb45-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb45-5"><a href="control-flow.html#cb45-5" aria-hidden="true" tabindex="-1"></a>    [&amp;] {</span>
<span id="cb45-6"><a href="control-flow.html#cb45-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">3</span>; ++j)</span>
<span id="cb45-7"><a href="control-flow.html#cb45-7" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb45-8"><a href="control-flow.html#cb45-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> (<span class="dt">int</span> k = <span class="dv">0</span>; k &lt; <span class="dv">3</span>; ++k)</span>
<span id="cb45-9"><a href="control-flow.html#cb45-9" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb45-10"><a href="control-flow.html#cb45-10" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (i == <span class="dv">1</span>)</span>
<span id="cb45-11"><a href="control-flow.html#cb45-11" aria-hidden="true" tabindex="-1"></a>                {</span>
<span id="cb45-12"><a href="control-flow.html#cb45-12" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">return</span>;</span>
<span id="cb45-13"><a href="control-flow.html#cb45-13" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb45-14"><a href="control-flow.html#cb45-14" aria-hidden="true" tabindex="-1"></a>                printf(<span class="st">&quot;</span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d\n</span><span class="st">&quot;</span>, i, j, k);</span>
<span id="cb45-15"><a href="control-flow.html#cb45-15" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb45-16"><a href="control-flow.html#cb45-16" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb45-17"><a href="control-flow.html#cb45-17" aria-hidden="true" tabindex="-1"></a>    }();</span>
<span id="cb45-18"><a href="control-flow.html#cb45-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>I’ll get back to lamdas later. For now just accept that they are roughly equivalent to Rust’s closures.</p>
</div>
<div id="switch" class="section level3" number="1.6.5">
<h3><span class="header-section-number">1.6.5</span> <code>switch</code></h3>
<p>C++’s <code>switch</code> is essentially a shortcut for a series of <code>if...else if...else if...else</code> statements when you want to match the value a single expression to a range of constant values. For example:</p>
<p>The following C++ code</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb46-1"><a href="control-flow.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> d = <span class="dv">5</span>;</span>
<span id="cb46-2"><a href="control-flow.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (d == <span class="dv">0</span>) {</span>
<span id="cb46-3"><a href="control-flow.html#cb46-3" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s Sunday!</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb46-4"><a href="control-flow.html#cb46-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (d == <span class="dv">6</span>) {</span>
<span id="cb46-5"><a href="control-flow.html#cb46-5" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s Saturday!</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb46-6"><a href="control-flow.html#cb46-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb46-7"><a href="control-flow.html#cb46-7" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s weekday.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb46-8"><a href="control-flow.html#cb46-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>is equivalent to:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb47-1"><a href="control-flow.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> (d)</span>
<span id="cb47-2"><a href="control-flow.html#cb47-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb47-3"><a href="control-flow.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">0</span>:</span>
<span id="cb47-4"><a href="control-flow.html#cb47-4" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s Sunday!</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb47-5"><a href="control-flow.html#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>;</span>
<span id="cb47-6"><a href="control-flow.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">6</span>:</span>
<span id="cb47-7"><a href="control-flow.html#cb47-7" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s Saturday!</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb47-8"><a href="control-flow.html#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>;</span>
<span id="cb47-9"><a href="control-flow.html#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="cf">default</span>:</span>
<span id="cb47-10"><a href="control-flow.html#cb47-10" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s weekday.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb47-11"><a href="control-flow.html#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>;</span>
<span id="cb47-12"><a href="control-flow.html#cb47-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>(I’ll start to omit headers from now on.)</p>
<p>Note the <code>break</code> statement at the end of each <code>case</code>, without which the <code>default</code> branch will always be triggered, which is clearly not we mean to do<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>.</p>
<p>You can group several values into a single branch:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb48-1"><a href="control-flow.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> d = <span class="dv">5</span>;</span>
<span id="cb48-2"><a href="control-flow.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> (d)</span>
<span id="cb48-3"><a href="control-flow.html#cb48-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb48-4"><a href="control-flow.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">0</span>:</span>
<span id="cb48-5"><a href="control-flow.html#cb48-5" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s Sunday!</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb48-6"><a href="control-flow.html#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>;</span>
<span id="cb48-7"><a href="control-flow.html#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">6</span>:</span>
<span id="cb48-8"><a href="control-flow.html#cb48-8" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s Saturday!</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb48-9"><a href="control-flow.html#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>;</span>
<span id="cb48-10"><a href="control-flow.html#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">1</span>:</span>
<span id="cb48-11"><a href="control-flow.html#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">2</span>:</span>
<span id="cb48-12"><a href="control-flow.html#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">3</span>:</span>
<span id="cb48-13"><a href="control-flow.html#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">4</span>:</span>
<span id="cb48-14"><a href="control-flow.html#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">5</span>:</span>
<span id="cb48-15"><a href="control-flow.html#cb48-15" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;It&#39;s weekday.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb48-16"><a href="control-flow.html#cb48-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>;</span>
<span id="cb48-17"><a href="control-flow.html#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="cf">default</span>:</span>
<span id="cb48-18"><a href="control-flow.html#cb48-18" aria-hidden="true" tabindex="-1"></a>    printf(<span class="st">&quot;Not a valid day of week!</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb48-19"><a href="control-flow.html#cb48-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>;</span>
<span id="cb48-20"><a href="control-flow.html#cb48-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This is all about <code>switch</code> in C++. (You need to unlearn the pattern matching in Rust)</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Related to this stackoverflow question: <a href="https://stackoverflow.com/questions/38030048" class="uri">https://stackoverflow.com/questions/38030048</a><a href="control-flow.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="https://stackoverflow.com/questions/1257744/can-i-use-break-to-exit-multiple-nested-for-loops" class="uri">https://stackoverflow.com/questions/1257744/can-i-use-break-to-exit-multiple-nested-for-loops</a><a href="control-flow.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>This <a href="https://stackoverflow.com/questions/252489/why-was-the-switch-statement-designed-to-need-a-break">StackOverflow question</a> might be interesting.<a href="control-flow.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pointers-and-references.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercise.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tianyishi2001/cpp4r/tree/docs/book/hello.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["cpp4r.pdf", "cpp4r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
